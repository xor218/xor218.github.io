---
layout: post
author: "å¤§è¥¿ç“œ"
title: "chapter08 å‡½æ•°çš„æ¢å¹½"
date:   2024-05-05 15:02:52 +0800
categories: [update,CPP] 
---

# chapter8:å‡½æ•°çš„æ¢å¹½

## C++å†…è”å‡½æ•°

 **ä½¿ç”¨æ–¹æ³•ï¼šåœ¨å‡½æ•°çš„å£°æ˜ å’Œå®šä¹‰å‰é¢éƒ½åŠ ä¸Šinline**

 å½“ä»£ç é‡å¤ªå¤§ï¼Œæˆ–è€…ä½¿ç”¨é€’å½’çš„æ—¶å€™ï¼ŒåŠ ä¸Šinline ç¼–è¯‘å™¨ä¹Ÿä¸ä¼šç”Ÿæˆå†…è”å‡½æ•°

 ```c++

 //å†…è”å’Œæ™®é€šå‡½æ•°çš„å…³ç³»ï¼šc++çš„ç¼–è¯‘å™¨å¦‚ä½•å¤„ç†å¸¸è§„å‡½æ•°å’Œå¦‚ä½•å¤„ç†å¸¸è§„å‡½æ•°
 //æ™®é€šå‡½æ•°åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œä¼šä»ä¸»å‡½æ•°è·³è½¬åˆ°å¦å¤–ä¸€ä¸ªå‡½æ•°çš„å†…å­˜åœ°å€ä¸­ï¼Œæ‰§è¡Œå®Œå†è·³å›æ¥
 //å†…è”å‡½æ•°ä¸ä¼šè·³è½¬åˆ°çš„å‡½æ•°ä¸­ï¼Œç›´æ¥åœ¨ä¸»å‡½æ•°ä¸­é‡å†™(ä¼˜ç‚¹ï¼šæ‰§è¡Œé€Ÿåº¦ç›¸å¯¹æ›´å¿«ï¼Œç¼ºç‚¹ï¼šå ç”¨å†…å­˜ç›¸å¯¹è¾ƒå¤šä¸€ç‚¹)
 ```

 ```c++
 inline double square(double x){return x*x;}
 ```

## å†…è”å‡½æ•°ä¸å®

 å®šä¹‰å®æœ‰æ—¶å€™ä¼šå‡ºç°é”™è¯¯ï¼Œå®åªæ˜¯è¿›è¡Œæ–‡æœ¬æ›¿æ¢

 ```c++
 #define SQUARE(X) X*X

 a= SQUARE(5.0);==> a=5.0*5.0
 b= SQUARE(5.0 +7.5);==> b=5.0 +7.5*5.0 +7.5 ==ã€‹âŒäº†
 d= SQUARE(c++); ==> d=c++ * c++;

 åº”è¯¥å†™æˆ 
 #define SQUARE(X) (X)*(X)
  
 ```

## å¼•ç”¨å˜é‡

 **å˜é‡è¿˜æ˜¯é‚£ä¸ªå˜é‡ï¼Œå°±æ˜¯èµ·äº†ä¸ªåˆ«å,ä¸»è¦ç”¨é€”æ˜¯ç”¨ä½œå‡½æ•°çš„å½¢å‚ï¼Œé€šè¿‡å¼•ç”¨éå˜é‡**
 **å‡½æ•°å°†ä½¿ç”¨åŸå±æ•°æ®è€Œä¸æ˜¯å…¶å‰¯æœ¬**

## åˆ›å»ºå¼•ç”¨å˜é‡

 ```c++
 int rate;
 int &rdodents=rate;  	//å¼•ç”¨å˜é‡æ°¸è¿œæ•ˆå¿ åˆå§‹åŒ–çš„å€¼,å’Œåˆå§‹åŒ–çš„åœ°å€
   										//&ä¸ä»£è¡¨åœ°å€è¿ç®—ç¬¦ï¼Œè€Œæ˜¯ç±»å‹æ ‡è¯†ç¬¦çš„ä¸€éƒ¨åˆ†
   										//rdodents æ˜¯rateçš„åˆ«åï¼Œä»–ä»¬æŒ‡å‘ç›¸åŒçš„å€¼ï¼Œå’Œå†…å­˜å•å…ƒ
 âš ï¸//å¿…é¡»åœ¨å£°æ˜å˜é‡çš„æ—¶å€™è¿›è¡Œåˆå§‹åŒ–ï¼›
 int rat;
   int &rodent;
   rodent =rat; âŒ //é”™è¯¯çš„çš„ç”¨æ³•;
 ---------------------------------------
 int &b=a;	//å®é™…ä¸Šæ˜¯ä¸‹è¿°ä»£ç çš„ä½ä¼ªè£…è¡¨ç¤º
 int* const b=&a; //ä¸èƒ½å¼•ç”¨åˆ«çš„å˜é‡ï¼›
 ---------------------------------------
 int fomefunc(int &a);
 int a=6;
 fomefunc(5); âŒ//ä¸èƒ½ä¸èƒ½ä¼ é€’å¸¸é‡
 fomefunc(5+a); âŒ//ä¹Ÿä¸èƒ½ä¸èƒ½ä¼ é€’å¸¸é‡+å˜é‡çš„è¡¨è¾¾å¼
 ---------------------------------------
 int fomefunc2(const int &a);  //ä¸å…è®¸ä¿®æ”¹å¼•ç”¨çš„å€¼
 int a=6;
 fomefunc2(5); OK//å’Œå‡½æ•°å®šä¹‰çš„å‚æ•°ä¸åŒ¹é…çš„æ—¶å€™ï¼Œå‚æ•°å¸¦const å¯ä»¥ä½¿ç”¨
 fomefunc2(5+a);//ä¼šè®¡ç®—è¡¨è¾¾å¼çš„ç»“æœï¼Œä¼ é€’ç»™ä¸€ä¸ªä¸´æ—¶å˜é‡ï¼Œç„¶åå’Œå½¢å‚å…³è”èµ·æ¥
  
 ```

## å°½é‡å¤šç”¨const

 1. **é¿å…ä¿®æ”¹åº”ç”¨çš„å€¼**
 2. **åŠ constå¯ä»¥ä½¿ç”¨å¸¦constå’Œä¸å¸¦constçš„å‚æ•°ï¼Œè¦ä¸ç„¶åªèƒ½ä½¿ç”¨éconst å‚æ•°**
 3. **ä½¿ç”¨const ä½¿ç”¨å‡½æ•°èƒ½æ­£ç¡®ç”Ÿæˆå¹¶ä¸”ï¼Œä½¿ç”¨ä¸´æ—¶å˜é‡** å¯ä»¥ä½¿ç”¨è¡¨è¾¾å¼,ä¾‹å¦‚ funcï¼ˆa+5ï¼‰

## å°†å¼•ç”¨ç”¨ä½œå‡½æ•°çš„å½¢å‚

 ```c++
 å‡½æ•°åŸå‹
 void myfunc(int & a,int &b);// å¼•ç”¨æ˜¯æ•°æ®ç±»å‹åŠ  &
 ```

 ```c++
 void swapr(int &a,int &b); //å¼•ç”¨çš„å‡½æ•°ç”³æ˜
 void swapp(int *a,int *b);  //ä½¿ç”¨æŒ‡é’ˆå£°æ˜
 void swapi(int a,int b);   //ä½¿ç”¨æ‹·è´

 int main(){
  int wallet1=350;
  int wallet2=300;
  
  swapr(wallet1,wallet2); //ä½¿ç”¨å¼•ç”¨
  //now wallet1=300;wallet2=350;
  
  swapp(&wallet1,&wallet2); //ä½¿ç”¨æŒ‡é’ˆ
  //now wallet1=350;wallet2=300;
  
  swapi(wallet1,wallet2);
  //wallet1 and wallet2 value no change;
  return 0;
 }

 void swapr(int &a,int &b){		//å¼•ç”¨å‡½æ•°åŸå‹
  int temp;
  temp=a;
  a=b;
  b=temp;
 }

 void swapp(int *a,int *b) //ä½¿ç”¨æŒ‡é’ˆå‡½æ•°
 {	int temp;
 temp=*a;
 *a=*b;
 *b=temp; 
 }

 void swapi(int a,int b){ //ä½¿ç”¨æ‹·è´
  int temp;
  temp=a;
  a=b;
  b=temp;
 }
 ```

## å°†å¼•ç”¨ç”¨äºç»“æ„

 **å¼•ç”¨é€šå¸¸ç”¨äºç»“æ„ä½“å’Œç±»**

 ```c++
 struct free_throws{
 std::string name;
 int made;
 int attempts;
 float percent;
 }
 void set_pc(free_throws & ft);//å¼•ç”¨ç»“æ„
 void set_pc(const free_throws & ft);//å¼•ç”¨ç»“æ„ä¸ä¿®æ”¹ç»“æ„é¢˜
 free_throws & set_pet(const free_throws& ft);//å¯ä»¥è¿”å›æ“ä½œåçš„ç»“æ„
 ```

## å°†å¼•ç”¨ç”¨äºç±»å¯¹è±¡

 åœ¨å‡½æ•°é‡Œé¢å£°æ˜çš„å˜é‡ï¼Œä¸å¯ä»¥åšä¸ºå‡½æ•°çš„è¿”å›å€¼ï¼Œå› ä¸ºå‡½æ•°ä½œä¸šå®Œä¹‹åï¼Œæ‰€äº§ç”Ÿçš„å˜é‡ä¼šè¢«é”€æ¯

 åŒæ ·ä¹Ÿä¸å¯ä»¥æŠŠå˜é‡çš„å¼•ç”¨åšä½è¿”å›å€¼ä¼ é€’å‡ºå»ï¼Œå˜é‡ä¸åœ¨äº†ï¼Œå¼•ç”¨ä¹Ÿä¸åœ¨ï¼›

## å¯¹è±¡ ç»§æ‰¿å’Œå¼•ç”¨

 ä¸€èˆ¬ä¼ é€’å‚æ•°çš„æ—¶å€™ï¼Œä¼ é€’å‚æ•°æœ¬èº«åªæ˜¯ä¼ é€’å‰¯æœ¬
 å½“æ•°æ®ç±»å‹æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œæ¯”å¦‚ç»“æ„ï¼Œç»“æ„æ¯”è¾ƒå¤§ï¼Œä¼šå½±å“ç¨‹åºè¿è¡Œé€Ÿåº¦ï¼Œä¼ é€’å¼•èµ·å¯ä»¥æé«˜è¿è¡Œé€Ÿåº¦ï¼Œè€Œä¸”ä¼ é€’çš„æ˜¯æ•°æ®æœ¬èº«

 ```c++
 //fstream æ˜¯æ˜¯ç»§æ‰¿è‡ª ostream
 éœ€è¦ç¼–å†™ä¸€ä¸ªå‡½æ•°ã€‚åœ¨cout å’Œæ–‡ä»¶æŒ‡é’ˆä¸€åŒè¾“å‡ºçš„æ—¶å€™,ç¼–å†™å‡½æ•°çš„æ—¶å€™å¯ä»¥å¼•ç”¨çˆ¶ç±»
 çˆ¶ç±»çš„å¼•ç”¨,å¯ä»¥æŒ‡å‘çˆ¶ç±»çš„å¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æŒ‡å‘å­ç±»çš„å¯¹è±¡

 void file_it(ostream &os,...);  //å‡½æ•°åŸå‹ 
 file_it(cout,...)	       //æ§åˆ¶å°è¾“å‡º
 file_it(fp,...)		//å†™å…¥æ–‡ä»¶ï¼Œ
 ```

## å¦‚ä½•ä¼ é€’å‚æ•°ï¼Œä¼ é€’ä»€ä¹ˆå‚æ•° ï¼ˆå€¼ï¼ŒæŒ‡é’ˆï¼Œå¼•ç”¨ï¼‰

### ä¸ä¿®æ”¹å†…å®¹

 * å¦‚æœæ•°æ®å¯¹è±¡å¾ˆå°ï¼Œå¦‚å†…ç½®çš„æ•°æ®ç±»å‹ï¼Œæˆ–è€…å°å‹ç»“æ„,ä¼ é€’å€¼
 * å¦‚æœæ•°æ®å¯¹è±¡æ˜¯æ•°ç»„ï¼Œåˆ™ä½¿ç”¨æŒ‡é’ˆ,å› ä¸ºè¿™æ˜¯å”¯ä¸€çš„é€‰æ‹©
 * å¦‚æœæ•°æ®å¯¹è±¡æ¯”è¾ƒå¤§çš„æ—¶å€™ï¼Œä½¿ç”¨constæŒ‡é’ˆ æˆ–è€…const å¼•ç”¨
 * å¦‚æœæ•°æ®å¯¹è±¡æ˜¯ç±»å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨const å¼•ç”¨

### ä¿®æ”¹å†…å®¹
 * å¦‚æœæ•°æ®å¯¹è±¡æ˜¯å†…ç½®æ•°æ®ç±»å‹ï¼Œä½¿ç”¨æŒ‡é’ˆ
 * å¦‚æœæ•°æ®å¯¹è±¡æ˜¯æ•°ç»„ï¼Œåˆ™ä½¿ç”¨æŒ‡é’ˆ
 * å¦‚æœæ•°æ®å¯¹è±¡æ˜¯ç»“æ„ï¼Œç”¨æŒ‡é’ˆæˆ–è€…å¼•ç”¨
 * å…¥è‚¡0å“¦æ•°æ®å¯¹è±¡æ˜¯ç±»å¯¹è±¡ï¼Œåˆ™ä½¿ç”¨å¼•ç”¨=+

### å‡½æ•°çš„é»˜è®¤å‚æ•°

ç¤ºä¾‹,**å¸¦æœ‰é»˜è®¤å€¼çš„éƒ½æ”¾åœ¨å³è¾¹**

```c++
char *left(const char *str,int n=1); //åœ¨å‡½æ•°åŸå‹ä¸­å†™
```

### c++ å·¦å€¼å³å€¼ å·¦å€¼å¼•ç”¨ å³å€¼å¼•ç”¨  && 
```c++
å·¦å€¼å¼•ç”¨ï¼šint &a=aa;    //aaå¯ä»¥å–åœ°å€
å³å€¼å¼•ç”¨ï¼šint &&b=10;   //10ä¸å¯ä»¥å–åœ°å€
```
**å¯ä»¥å–åœ°å€çš„å«åšå·¦å€¼ï¼Œä¸èƒ½å–åœ°å€çš„å«å³å€¼**
**å¼•ç”¨å¿…é¡»å’Œå˜é‡å…³è”èµ·æ¥**

```c++
int a=10;     //10æ”¾å¯„å­˜å™¨é‡Œé¢
int b=a;			//aåªè¯»ï¼Œbå¯ä»¥è¯»å†™
int c= a+b;   //aå’Œbæ˜¯å·¦å€¼ï¼Œa+bæ˜¯å³å€¼
							//å¯ä»¥å–åœ°å€çš„å«åšå·¦å€¼ï¼Œä¸èƒ½å–åœ°å€çš„å«å³å€¼ï¼Ÿ
int *p=&a;		//å¯ä»¥å–åœ°å€ï¼Œå·¦å€¼
```



```c++
a=10;
int &b=a;  //å·¦å€¼å¼•ç”¨
int &c=10; //é”™è¯¯å¼•ç”¨å¿…é¡»å¾—æ˜¯ä¸ªå·¦å€¼
```



```c++
int a=1;
int b=2;
int &c=10;   		  // âŒ not ok å³è¾¹å¿…é¡»å–å†…å­˜åœ°å€çš„å˜é‡
int &c=(a+b); 	  //âŒ
const &a =10;   	 //ğŸ‘Œ constä¼šè®©10åœ¨å†…å­˜ä¸­ç”Ÿæˆä¸´æ—¶å˜é‡
const &c=(a+b);    //ğŸ‘Œ

const ä¼šè®©ç”Ÿæˆä¸´æ—¶å˜é‡
å¼•ç”¨å¿…é¡»å’Œå˜é‡å…³è”èµ·æ¥//
```




### å‡½æ•°é‡è½½

**å‡½æ•°åå­—ä¸€æ ·ï¼Œå‚æ•°ä¸ä¸€æ ·**

ç”±å‡½æ•°çš„**å‚æ•°ç±»å‹ï¼Œå‚æ•°çš„ä¸ªæ•°,å‚æ•°çš„æ’åˆ—é¡ºåº** ç¡®å®šä½¿ç”¨é‚£ä¸ªå‡½æ•°âš ï¸ä¸çœ‹**è¿”å›å€¼**

å‡½æ•°çš„å¤šç§å½¢å¼ï¼Œå‡½æ•°å…è®¸æœ‰å¤šç§å½¢å¼çš„å­˜åœ¨ï¼Œå¯ä»¥å…è®¸æœ‰å¤šç§åå­—

å‡½æ•°å¤šæ€å’Œå‡½æ•°é‡è½½å®é™…æ˜¯ä¸€ä¸ªæ ·å­

## ä¸¤ä¸ªå‡½æ•°åä¸€æ ·ï¼Œå‚æ•°åæ˜¯ä¸¤ä¸ªï¼ŒæŒ‰ç…§å‚æ•°ä¼ å€¼

```c++
//ä¸¤ä¸ªå‡½æ•°åä¸€æ ·ï¼Œå‚æ•°åæ˜¯ä¸¤ä¸ªï¼ŒæŒ‰ç…§å‚æ•°ä¼ å€¼
void print(const char *str,int width); //#1
void print(double d,int width);					//#2
void print(long l,int width);						//#3
void print(int i,int width);						//#4
void print(const char *str);						//#5

print("pancakes",15);	  //use #1
print("Syrup");				  //use #5
print("1990.0,10");			//use #2
print(1999,12);				  //use #4
print(1999L,15);        //#use #

unsigned int year=3210;
print(year,6);		//æœ‰äºŒä¹‰æ€§ï¼Œåªæœ‰ä¸€ä¸ªå‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šå¼ºåˆ¶ç±»å‹è½¬æ¢
									//æœ‰ä¸‰ä¸ªåŒåå‡½æ•°ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“è¯¥è½¬æ¢å“ªç§ç±»å‹,ä¼šæŠ¥é”™
```

## doubleå’Œdoubleå¼•ç”¨ï¼Œç¼–è¯‘å™¨çœ‹åšåŒä¸€ç§ç‰¹å¾

```c++
double cube(double x); //doubleå’Œdoubleå¼•ç”¨ï¼Œç¼–è¯‘å™¨çœ‹åšåŒä¸€ç§ç‰¹å¾
double cube(double &x);
cout << cube(x); //ä¼šå‡ºé”™ï¼Œä¸çŸ¥é“è°ƒç”¨é‚£ä¸ªå‡½æ•°
```

## å‡½æ•°é‡è½½ä¸åŒºåˆ†const å’Œéconst å˜é‡;

```c++
å‡½æ•°é‡è½½ä¸åŒºåˆ†const å’Œéconst å˜é‡;

//ä¸å¸¦constçš„å‚æ•°ï¼Œå¯ä»¥ä¼ ç»™å‚æ•°ä¸ºconstçš„å‡½æ•°ï¼›
//å¸¦constçš„å‚æ•°ï¼Œä¸å¯ä»¥ä¼ é€’ç»™å‚æ•°ä¸ºéconstçš„å‡½æ•°ï¼›
```

## å‡½æ•°é‡è½½ä¸çœ‹è¿”å›å€¼

```c++
long grnok(int n,float m);
double grnok(int n.float m); âš ï¸//å‡½æ•°é‡å¤å®šä¹‰ï¼Œä¸æ˜¯é‡è½½
-------------------------------------------------------
long grnok(int n,float m);
double grnok(float m.int n); //å‚æ•°é¡ºåºä¸ä¸€æ ·ï¼Œå³ä½¿è¿”å›å€¼ä¸ä¸€æ ·ï¼Œ
															//ä¹Ÿä¼šè¢«è®¤ä¸ºæ˜¯å‡½æ•°é‡è½½

```

## å‚æ•°ä¸ºè¡¨è¾¾å¼ å®šä¹‰ &&

```c++
å‚æ•°ä¸ºè¡¨è¾¾å¼ å®šä¹‰ &&
void func(double &&r1);  //å‚æ•°ä¸ºè¡¨è¾¾å¼ï¼Œæˆ–è€…å³è¾¹å€¼
--------------------------------------------------------
void stove(double &r1);          //#1
void stove(const double &r2);    //#2
void stove(double &&  r3);       //#3

const double y=55.0;
double x=32.0;
stove(x);                   //use #1
stove(y);                   //use #2
stove(120);                 //use #3  å¦‚æœæ²¡å®šä¹‰#3 ä¼šç”¨#2
stove(x+y);                 //use #3  å¦‚æœæ²¡å®šä¹‰#3 ä¼šç”¨#2 
														//å³å€¼å¼•ç”¨

```


## ä»€ä¹ˆæ—¶å€™ä½¿ç”¨å‡½æ•°é‡è½½

```c++
//å½“å‡½æ•°åŸºæœ¬æ‰§è¡Œç›¸åŒçš„ä»»åŠ¡ï¼›ä½†æ˜¯ç”¨ä¸åŒçš„å½¢å¼çš„æ•°æ®ï¼Œæ‰åº”è¯¥é‡‡ç”¨å‡½æ•°é‡è½½

```



## å‡½æ•°æ¨¡ç‰ˆ

### å‡½æ•°æ¨¡ç‰ˆä¸æ˜¯å‡½æ•°ï¼ï¼

åœ¨ç”¨å‡½æ•°çš„æ—¶å€™ï¼Œç¼–è¯‘å™¨æ ¹æ®è°ƒç”¨çš„å½¢å‚ç”Ÿæˆæ–°çš„å‡½æ•°ä¾›ä½ ä½¿ç”¨


## äº¤æ¢å‡½æ•°

```c++
//äº¤æ¢å‡½æ•°,å¦‚æœè¦äº¤æ¢ä¸‰ç§æ•°æ®ç±»å‹ï¼Œdouble ç­‰ï¼Œéœ€è¦å†™ä¸‰ä¸ªå·®ä¸å¤šçš„å‡½æ•°
//è¿™ä¸ªæ—¶å€™åº”è¯¥ç”¨å‡½æ•°æ¨¡ç‰ˆ
void swap(int x,int y);
void swap(int x,int y){
	int temp;
	temp=x;
	x=y;
	y=temp
}

```

## å®šä¹‰å‡½æ•°æ¨¡ç‰ˆ

```c++
template <typename AnyType> //AnyType æ˜¯å‡½æ•°æ¨¡ç‰ˆåå­—
														//å†™æˆ template <class AnyType> 
                   		//å‡½æ•°è¢«ä½¿ç”¨çš„æ—¶å€™ï¼Œä¼šç”Ÿæˆæ–°çš„å‡½æ•°
void swap(AnyType &a,AnyType &b){
	AnyType temp;
	temp=a;
	a=b;
	b=temp;                              
}                         
```

## ä½¿ç”¨å‡½æ•°æ¨¡ç‰ˆ

```c++
#include <iostream>

using namespace std;

template <typename  T>  // å‡½æ•°åŸå‹çš„æ—¶å€™è¦ç”¨å‡½æ•°æ¨¡ç‰ˆ typename T ä¹‹é—´ä¸è¦é€—å·
void exchange(T &a,T &b);

int main(){

int i=10;

int j=20;

cout << "i,j = "<<i<<","<<j<< endl;
exchange(i,j);
cout << "after exchange i,j = "<<i<<","<<j<< endl;
double x=24.5;
double y=45.6;
cout << "x,y = "<<x<<","<<y<< endl;
exchange(x,y);
cout << "after exchange x,y = "<<x<<","<<y<< endl;

}

template <typename T>   // å‡½æ•°å®šä¹‰çš„æ—¶å€™ä¹Ÿè¦ç”¨å‡½æ•°æ¨¡ç‰ˆ
void exchange(T &a,T &b){
T temp;
temp=a;
a=b;
b=temp;
}

```

## å‡½æ•°æ¨¡ç‰ˆçš„å…¶ä»–ç”¨æ³•

```c++
#include <iostream>
using namespace std;

template <typename  T>  // å‡½æ•°åŸå‹çš„æ—¶å€™è¦ç”¨å‡½æ•°æ¨¡ç‰ˆ 
void func(const T &a,int b=1);  //é»˜è®¤å‚æ•°å¸è½½

int main(){
    int hello=56666;
    func("hello",2);    //T å˜æˆ template  char*
    func(6,4);          //å‚æ•°ç±»å‹æ˜¯å¸¸é‡,å¿…é¡»åŠ ä¸Šconstæˆ–è€…å‡½æ•°å‚æ•° 
  													//ä¸ºå¼•ç”¨å³è¾¹å€¼
    func(hello);           //åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œä¼šä½¿ç”¨é»˜è®¤å‚æ•°
    return 0;

}

template <typename  T>  // å‡½æ•°åŸå‹çš„æ—¶å€™è¦ç”¨å‡½æ•°æ¨¡ç‰ˆ typename T ä¹‹é—´ä¸è¦é€—å·
void func(const T &a,int b){
    while(b--){
        cout << a<< " ";
    }
    cout << endl;
}
```

## é‡è½½çš„æ¨¡ç‰ˆ

**å†å¤šä¸ªå‡½æ•°åŒåçš„æ—¶å€™ï¼Œç”±å‚æ•°å†³å®šç”¨é‚£ä¸ªæ¨¡ç‰ˆï¼Œå†ç”±æ•°æ®ç±»å‹ï¼Œæ¨¡ç‰ˆå†³å®šç”Ÿæˆé‚£ä¸ªå‡½æ•°**

```c++
#include <iostream>
using namespace std;

template <typename  T>  // å‡½æ•°åŸå‹çš„æ—¶å€™è¦ç”¨å‡½æ•°æ¨¡ç‰ˆ typename T ä¹‹é—´ä¸è¦é€—å·
void exchange(T &a,T &b);

template <typename T>                   // ç¬¬äºŒä¸ªå‡½æ•°æ¨¡ç‰ˆ  ä¸¤ä¸ªå‡½æ•°åå­—ä¸€æ ·
void exchange(T a[],T b[],int n);       // ç¼–è¯‘å™¨çœ‹å‚æ•°å†³å®šç”¨ä»€ä¹ˆæ¨¡ç‰ˆ

void show(int arr[],int n);
const int LIMIT=8;

int main(){

    int i=10;
    int j=20;
  
    cout << "i,j = "<<i<<","<<j<< endl;
    exchange(i,j);
    cout << "after exchange i,j = "<<i<<","<<j<< endl;
    double x=24.5;
    double y=45.6;
    cout << "x,y = "<<x<<","<<y<< endl;
    exchange(x,y);
    cout << "after exchange x,y = "<<x<<","<<y<< endl;

    int d1[LIMIT]={1,7,6,5,4,3,1,2};
    int d2[LIMIT]={2,2,2,2,2,2,2,2};
    cout <<"Origianl arrays:" << endl;
    show(d1,LIMIT);
    show(d2,LIMIT);
    exchange(d1,d2,LIMIT);
    cout <<"exchange later arrays:" << endl;
    show(d1,LIMIT);
    show(d2,LIMIT);
}

template <typename T>   // å‡½æ•°å®šä¹‰çš„æ—¶å€™ä¹Ÿè¦ç”¨å‡½æ•°æ¨¡ç‰ˆ
void exchange(T &a,T &b){
    T temp;
    temp=a;
    a=b;
    b=temp;
}

template <typename T>			
void exchange(T a[],T b[],int n){
    T temp;
    for(int i=0;i<n;i++){
        temp=a[i];
        a[i]=b[i];
        b[i]=temp;
    }
}

void show(int arr[],int n){
    for(int i=0;i<n;i++){
        cout <<arr[i] <<" ";
    }
    cout<< endl;
}
```



## æ¨¡ç‰ˆçš„å±€é™æ€§ æ˜¾å¼å…·ä½“åŒ–

ç›¸åŒåç§°å‡½æ•°çš„ä¼˜å…ˆçº§ï¼š

**æ™®é€šå‡½æ•°**  å¤§äº **æ˜¾å¼å…·ä½“åŒ–çš„å‡½æ•°** å¤§äº **æ™®é€šæ¨¡ç‰ˆå‡½æ•°**

```c++
//æ™®é€šå‡½æ•°ï¼Œä¼˜å…ˆçº§æœ€é«˜
void Swap(job&,job&);

//æ˜¾å¼å…·ä½“åŒ–å‡½æ•°ï¼Œä¼˜å…ˆçº§ç¬¬2å
template<>
void Swap<job>(job& j1,job &j2);

//æ™®é€šå‡½æ•°æ¨¡ç‰ˆ,ä¼˜å…ˆçº§æœ€ä½
template<class T>
void Swap(T& t1,T&t2);




```



## æ˜¾ç¤ºå…·ä½“åŒ– å‡½æ•°åŸå‹

**template <>void Swap<job>(job &j1,job &j2)ï¼›**

**template<>ä¸ºç©ºï¼Œjobä¸ºç‰¹æ®Šå¤„ç†çš„å‡½æ•°ç±»å‹**

```c++
struct job{
name char[20];
double salary;
int age;
}

template <typename T>   // å‡½æ•°å®šä¹‰çš„æ—¶å€™ä¹Ÿè¦ç”¨å‡½æ•°æ¨¡ç‰ˆ
void exchange(T &a,T &b){
T temp;
temp=a;
a=b;
b=temp;
}

job minliang={"minlang",1000,33};
job minrui={"minrui",3,6};

å½“ç”¨äº¤æ¢å‡½æ•°äº¤æ¢  ç»“æ„minliang å’Œ minruiçš„æ—¶å€™
æ‰€æœ‰çš„éƒ½ä¼šè¢«äº¤æ¢ï¼Œåå­—ï¼Œå¹´é¾„ï¼Œå·¥èµ„
è¿™ä¸ªæ—¶å€™è¦ç”¨æ˜¾ç¤ºå…·ä½“åŒ–

template <>void Swap<job>(job &j1,job &j2){
	float temp_salary;
	int temp_age;
	temp_salary=j1.salary;
	j1.salary=j2.salary;
	j2.salary=temp_salary;
	temp_age=j1.age;
j1.age=j2.age;
j2.age=temp_age;

}


```



```c++
#include <iostream>
using namespace std;


struct job{
    char name[20];
    float salary;
    int age;
};

template <typename T>
void Swap(T &a,T &b);

template <>   //ç‰¹æ®Šçš„æ•°æ®ç±»å‹ï¼Œå†é‡æ–°ç¼–å†™ä¸€ä¸ªå‡½æ•° <>ç•™ç©º
void Swap<job>(job &a,job &b); //ç‰¹æ®Šçš„æ•°æ®ç±»å‹ å¸è½½å‡½æ•°åé¢ job



int main(){
    int a=30;
    int b=20;
    job minliang={"minliang",3,5};
    job minrui={"minrui",3000,35};
    cout <<"a = " << a << endl;
    cout <<"b = " << b << endl;
    cout <<"minliang:" << minliang.name <<" " << minliang.salary << " " << minliang.age << endl;
    cout <<"minrui:" << minrui.name <<" " << minrui.salary << " " << minrui.age << endl;

    Swap(a,b);
    cout <<"a = " << a << endl;
    cout <<"b = " << b << endl;
    Swap(minliang,minrui);

    cout <<"minliang:" << minliang.name <<" " << minliang.salary << " " << minliang.age << endl;
    cout <<"minrui:" << minrui.name <<" " << minrui.salary << " " << minrui.age << endl;



return 0;
}

template <typename T>
void Swap(T &a,T &b){
    T temp;
    temp=a;
    a=b;
    b=temp;
}

template <>
void Swap<job>(job &a,job &b){
    float temp_f;
    int temp_i;
    temp_f=a.salary;
    a.salary=b.salary;
    b.salary=temp_f;
    temp_i=a.age;
    a.age=b.age;
    b.age=temp_i;
}


```


## æ˜¾å¼å…·ä½“åŒ–ä¸æ˜¾å¼å®ä¾‹åŒ–

æ˜¾ç¤ºå…·ä½“åŒ–çš„ç”¨æ³•ï¼Œä¸çŸ¥é“å¯¹ä¸å¯¹

```c++
//file_name: main.cpp
#include <iostream>
#include "head.h"
>using namespace std;
>extern template void Swap(int &a,int &b); //å¼•å…¥å¤–éƒ¨çš„Swap ç”Ÿæˆ void Swap(char m)

int main(){
char a='a';
	char b ='b';
	swap(a,b);
	cout << a << " "<<b << endl;
	return 0;

>}

using namespace std;
extern template void Swap(int &a,int &b); //å¼•å…¥å¤–éƒ¨çš„Swap ç”Ÿæˆ void Swap(char m)

int main(){
	char a='a';
	char b ='b';
	swap(a,b);
	cout << a << " "<<b << endl;
	return 0;
}

```

```c++
//file_name:head.h
#ifndef __HEAD__H__
#define __HEAD__H__
>template<class T>
>void Swap(T&t1,T&t2);

>#endif



```

```c++
//file_name:head.cpp
#include "head.h"
template<class T>
void Swap(T&t1,T&t2){
	T temp=t1;
	t1=t2;
	t2=temp;
}



```








æ˜¾ç¤ºå…·ä½“åŒ–æ˜¯ä¸ºç‰¹æ®Šçš„æ•°æ®ç±»å¼€è¾Ÿä¸€ä¸ªç‰¹æ®Šçš„é€šé“ï¼Œä¸è®©å…¶ä½¿ç”¨é€šç”¨æ¨¡ç‰ˆï¼Œä¸è°ƒç”¨ä¸ç”Ÿæˆå…·ä½“å‡½æ•°å®šä¹‰
æ˜¾ç¤ºå®åŠ›åŒ–ï¼Œæ— è®ºè¯¥å‡½æ•°æ˜¯å¦è¦è¢«ä½¿ç”¨ï¼Œç¼–è¯‘å™¨éƒ½ä¼šç”Ÿæˆå‡½æ•°





```c++
template void Swap(int &a,int &b); //æ˜¾ç¤ºå®åŠ›åŒ– ä¸ä»£ <>
															//è°ƒç”¨ä¸è°ƒç”¨éƒ½å…ˆç”Ÿæˆ å‡½æ•°å®šä¹‰
											//é“¾æ¥å…¶ä»–æ–‡ä»¶ è°ƒç”¨å‡½æ•°ä¹‹å‰è¦æœ‰ç”Ÿæˆçš„å‡½æ•°å®šä¹‰ï¼Ÿ
											//å¤šæ¬¡ç”Ÿæˆçš„å‡½æ•°å®šä¹‰ï¼Œå‡½æ•°åœ°å€ä¹Ÿä¸ä¸€æ ·
											//è¦å†™åœ¨ç”¨çš„åœ°æ–¹
---------------------------------------------------------------

template <> void Swap<int>(int &,int &);
template <> void Swap(int &,int &);// ä¸¤ä¸ªå…·ä½“åŒ–å…¶å®ä¸€æ ·
													//å‡½æ•°ååé¢<>é‡Œé¢çš„æ•°æ®ç±»å‹å¯ä»¥çœç•¥


```

```c++
template <class T>    #1 å‡½æ•°é€šç”¨æ¨¡ç‰ˆ
void Swap(T &,T&);

template<>void Swap<job><job &,job &>; #2 æ˜¾ç¤ºå…·ä½“åŒ–

template void Swap<char>(char&,char&);  #3 charçš„æ˜¾å¼å®ä¾‹åŒ–  //

int main(void){

    short a,b;
    ...
    swap(a,b);//è°ƒç”¨é€šç”¨çš„æ¨¡ç‰ˆå»å¤„ç†
    job n,m; 
    ...
    swap(n,m); //jobæ˜¾ç¤ºå…·ä½“åŒ– #2 å»å¤„ç†
    char g,h;
    ...
    swap(g,h);//ä½¿ç”¨ #3  charçš„æ˜¾å¼å®ä¾‹åŒ–å»å¤„ç†
    ...
}

```

## å¤šä¸ªé‡åå‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼šåŒ¹é…å“ªä¸ªï¼Ÿ
**ç¼–è¯‘å™¨ä¼šä¼˜å…ˆåŒ¹é…æœ€ç¬¦åˆå‚æ•°å®šä¹‰çš„å‡½æ•°ï¼Œæœ€ç®€å•ï¼Œæœ€ç›´æ¥ï¼Œæœ€èƒ½åŒ¹é… å°±æ˜¯æœ€ä½³çš„**

 ```c++
 ä¸€å…±æœ‰7ä¸ªå‡½æ•°ï¼Œæˆ–è€…å‡½æ•°çš„æ¨¡ç‰ˆ
 void may(int);						    //#1
 float may(float,float=3);			    //#2
 void may(char);					    //#3
 char * may(const char *);			    //#4
 char may(const char &);				//#5
 template <class T> void may(const T&); //#6
 template <class T> void may(T *);		//#7
 
 may('B');//è¯¥è°ƒç”¨å“ªä¸ªå‡½æ•°ï¼Ÿ
//æ’é™¤#4 å’Œ#7 å› ä¸ºå‚æ•°ä¸ºæŒ‡é’ˆç±»å‹ å…¶ä»–éƒ½æ˜¯å¯è¡Œçš„
 //  #1 ä¼˜äº #2
 //	#3 #5 #6ä¼˜äº #1å’Œ #2
 //  #3 #5 ä¼˜äº #6 æ™®é€šå‡½æ•° ä¼˜äºå‡½æ•°æ¨¡ç‰ˆ
 
 ```




 ```c++
 å‡å¦‚æœ‰ä¸€ä¸‹çš„å‡½æ•°ä»£ç ;
 struct blot{
   int a;
   char b[10];
 }
 
 blot ink={25,"spots"};
 
 recycle(ink);//ä½¿ç”¨recycle å‡½æ•°
 
 //ä¸‹é¢çš„å‡½æ•°åŸå‹éƒ½æ˜¯å®Œå…¨åŒ¹é…çš„
 void reecycle(blot)	;				//#1 	blot to blot
 void reecycle(const blot);	//#2 	blot to (const blot)
 void reecycle(blot &);			//#3	blot to (blot &)
 void reecycle(const blot &);//#4 	blot to (const blot &)
 
 //å¦‚æœæœ‰å¤šä¸ªåŒ¹é…åŸå‹ï¼Œç¼–è¯‘å™¨ä¸çŸ¥é“åŒ¹é…å“ªä¸ªå‡½æ•°
 //æ­¤æ—¶ç¼–è¯‘å™¨ä¼šç”Ÿæˆé”™è¯¯çš„æ¶ˆæ¯ï¼Œä¾‹å¦‚â€œambiguous (äºŒä¹‰æ€§)
 
 recycle(ink);åªæœ‰å‡½æ•°#1å’Œ#2çš„æ—¶å€™ï¼Œå°±ä¸çŸ¥é“åŒ¹é…é‚£ä¸ªå‡½æ•°äº†
 recycle(ink);åªæœ‰å‡½æ•°#3å’Œ#4çš„æ—¶å€™ï¼Œä¼˜å…ˆåŒ¹é…#3
 éconstå‚æ•° ä¼˜å…ˆåŒ¹é…éconstå‡½æ•°ï¼Œæ‰¾ä¸åˆ°äº†ï¼Œå†åŒ¹é…consså‡½æ•°ï¼ˆé™äºæŒ‡é’ˆå’Œå¼•ç”¨ï¼‰
 
 ```

 

## è‡ªå·±è‡ªå·±é€‰æ‹©è¦è°ƒç”¨çš„åŒåå‡½æ•°

 ä¸€èˆ¬å‡½æ•°æ¨¡ç‰ˆæ˜¯ç”±ç¼–è¯‘å™¨å†³å®šï¼Œå¯ä»¥æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨ ä½¿ç”¨æŒ‡å®šçš„å‡½æ•°*

 func<>(å‚æ•°)ï¼›<> è¡¨ç¤ºå‘Šè¯‰ç¼–è¯‘å™¨ä½¿ç”¨æ¨¡ç‰ˆå‡½æ•°

 func< int >(å‚æ•°);<> è¡¨ç¤ºå‘Šè¯‰ç¼–è¯‘å™¨å°†å‚æ•°ç±»å‹è½¬æ¢æˆint ç±»å‹,ç„¶åä½¿ç”¨æ¨¡æ¿å‡½æ•°

 ```c++
 template <typename T>    //æ¨¡æ¿å‡½æ•°
 T lesser(T a,T b )ï¼›
 
 int lesser(int a,int b)ï¼›//æ™®é€šå‡½æ•°ï¼Œç¼–è¯‘å™¨ä¼˜å…ˆä½¿ç”¨æ™®é€šå‡½æ•°
 
 int m=20;
 int n=-30;
 double x=15.6;
 double y=23.6;
 
 lesser(m,n);  //å’Œæ™®é€šå‡½æ•°ç±»å‹åŒ¹é…ï¼Œä¼˜å…ˆä½¿ç”¨æ™®é€šå‡½æ•°
 lesser<>(m,n);	// <> è¡¨ç¤º æ˜ç¡®å‘Šè¯‰ç¼–è¯‘å™¨ä½¿ç”¨æ¨¡ç‰ˆå‡½æ•°
 lesser(x,y);		//å’Œæ™®é€šå‡½æ•°ç±»å‹ä¸åŒ¹é…ï¼Œç¼–è¯‘å™¨ä¼šä½¿ç”¨æ¨¡ç‰ˆå‡½æ•°
 lesser<int>(x,y);// <int>è¡¨ç¤º,å°†å‚æ•°å¼ºåˆ¶ç±»å‹è½¬æ¢ä¸ºint,ç„¶åä½¿ç”¨æ¨¡æ¿å‡½æ•°
 
 ```

 

## æ¨¡ç‰ˆå‡½æ•°æœ‰å¤šä¸ªå€¼çš„æ—¶å€™ï¼Œå‡½æ•°é‡Œé¢ä¸ç¡®å®šæ•°æ®ç±»å‹çš„æ—¶å€™

**template <class T1,class T2>**

**Void func(T1 &a,T2&b);  //ç”¨å¤šç§æ•°æ®ç±»å‹åˆ†åˆ«èµ·åå­—**

âš ï¸**æ–°å…³é”®å­— decltype **ï¼ˆc++11ï¼‰ ä¹ŸåŒ…æ‹¬const é™å®šå­—ç¬¦

decltype(x) y;  // y å£°æ˜ä¸ºå’Œxä¸€æ ·çš„æ•°æ®ç±»å‹

```c++
int x=5;
decltype(x) y;  // y å£°æ˜ä¸ºå’Œxä¸€æ ·çš„æ•°æ®ç±»å‹
decltype(x+y) z; //

decltype(å‡½æ•°(x,y)) z; //zçš„æ•°æ®ç±»å‹å’Œå‡½æ•°çš„è¿”å›å€¼ç›¸åŒ
											//ä¸ä¼šè°ƒç”¨å‡½æ•°ï¼Œç›´æ¥çœ‹è¿”å›å€¼

double xx=5.5;
decltype((xx)) r2=xx; //rræ˜¯double & å¼•ç”¨
decltype(xx) w=xx;		//wæ˜¯double ç±»å‹
```




```c++
template <class T1,class T2>
void ft(T1 &a,T2 &b){
...
?which_type? xpy=a+b;  //âŒxpyä¸çŸ¥é“ä½•ç§æ•°æ®ç±»å‹
decltype(x+y) xpy=a+b; //åº”è¯¥è¿™æ ·å†™
...
}

```


## **é€šç”¨æ¨¡ç‰ˆè¿”å›å€¼çš„é—®é¢˜**

```c++
template <class T1,class T2>
decltype(x+y) ft(T1 &a,T2 &b)ï¼›âŒç”¨æ³•é”™è¯¯
  
//åº”è¯¥å†™æˆ
template <class T1,class T2>
auto func(T1 &a,T2 &b) ->decltype(x+y){ 
  ...
  return x+y;
}				//decltype(x+y) æ˜¯æ¨æ–­è¿”å›å€¼ï¼Œå‡½æ•°å£°æ˜å’ŒåŸå‹éƒ½è¦å†™
```


