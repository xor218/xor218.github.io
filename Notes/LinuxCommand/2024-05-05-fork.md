---
layout: post
author: "大西瓜"
title: "fork"
date:   2024-05-05 10:46:02 +0800
categories: [update,LinuxCommand] 
---
```bash
FORK(2) 系统调用手册 FORK(2)

姓名
     fork - 创建一个新进程

说明
     #include <unistd.h>

     pid_t
     fork(void)；

说明
     fork() 会创建一个新进程。  新进程（子进程）
     是调用进程（父进程）的完全副本，除了
     下面：

            - 子进程有一个唯一的进程 ID。

            - 子进程有不同的父进程 ID（即
               父进程的进程 ID）。

            - 子进程有自己的父进程描述符副本。
               这些描述符引用了相同的底层对象，因此
               例如，文件对象中的文件指针是共享的
               在子代和父代之间，因此在子代上的 lseek(2)
               子进程中的描述符会影响随后的读取或
               由父级写入。  这种描述符复制功能还可用于
               shell 建立标准输入和输出，为新的
               创建进程以及设置管道。

            - 子进程资源利用率设为 0；请参阅
               setrlimit(2).

返回值
     成功完成后，fork() 会向子节点返回一个 0 值。
     进程，并将子进程的进程 ID 返回父进程
     进程。  否则，将向父进程返回-1 的值，父进程不会收到该值。
     创建了子进程，全局变量 errno 被设置为
     显示错误。

错误
     如果出现以下情况，fork() 将会失败，并且不会创建子进程：

     [EAGAIN]系统规定的对"...... "总数的限制。
                        执行中的进程会超时。  这
                        限制取决于配置。

     [EAGAIN]系统对 MAXUPRC (⟨sys/param.h⟩)设置的限制。
                        执行中的进程总数
                        将超过单个用户的使用量。

     [ENOMEM] 新进程的交换空间不足。

遗产简介
     #include <sys/types.h>
     #include <unistd.h>

     必须包含文件 <sys/types.h>。

另见
     execve(2), sigaction(2), wait(2), compat(5)

历史
     在 AT&T UNIX 第 6 版中出现了 fork() 函数调用。

注意事项
     在孩子的成长过程中，你所能做的是有限的。  要完全
     你应该限制自己只执行安全的异步信号
     在调用其中一个执行函数之前，所有操作都不会执行。  所有
     任何框架或库中的应用程序接口（包括全局数据符号）都应
     被假定为不安全的，除非有明确的文件证明是
     安全或异步信号安全。  如果您需要在
     子进程，就必须执行。  在这种情况下，执行
     你自己

BSD 4 1993 年 6 月 4 日 BSD 4
```